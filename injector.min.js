/*! injectjs - v0.1.0 - 2012-06-12
* http://github.com/aaronius/injectjs/
* Copyright (c) 2012 Aaron Hardy; Licensed MIT */
(function(a,b){typeof exports=="object"?module.exports=b(a):typeof define=="function"&&define.amd?define(function(){return b(a)}):a.Injector=b(a)})(this,function(a){"use strict";var b=a.Injector,c=function(a){return a===void 0},d=Object.prototype.toString,e=function(a){return d.call(a)==="[object String]"},f=Array.prototype.toString,g=Array.isArray||function(a){return f.call(a)==="[object Array]"},h=function(a){var b=Object;return a===b(a)},i=function(b){var c=a[b];if(c)return c;var d=b.split("."),e=a;for(var f=0,g=d.length;f<g;f++)e=e[d[f]];return e},j=function(a,b){this._injector=a,this.key=b},k=j.prototype;k.get=function(){if(!c(this._cache))return this._cache;var a=this._create();return this._asSingleton&&(this._cache=a),h(a)&&this._injector.injectInto(a),a},k.asSingleton=function(a){return this._asSingleton=!0,a&&this.get(),this},k.toConstructor=function(a){return this._create=function(){var b=a;return e(a)&&(b=i(a)),new b},this},k.toFactory=function(a){return this._create=a,this},k.toValue=function(a){return this._cache=a,this};var l=function(a){this._mappings={},this.parentInjector=a};l.noConflict=function(){return a.Injector=b,this},k=l.prototype,k.map=function(a){var b=new j(this,a);return this._mappings[a]=b,b},k.unmap=function(a){return delete this._mappings[a],this},k._getMapping=function(a){var b=this._mappings[a];return!b&&this.parentInjector&&(b=this.parentInjector._getMapping(a)),b},k.get=function(a,b,c){if(!a)return;e(a)&&(a=[a]);for(var d=0,f=a.length;d<f;d++){var g=a[d],h=this._getMapping(g);if(!h)throw'Mapping not found for key "'+g+'".';if(b)b.call(c||this,g,h.get());else return h.get()}};var m=function(a,b){this[a]=b};return k.injectInto=function(a){if(!a)return this;var b=a.inject;return b?(this.get(b,a.injectDelegate||m,a),this):this},l});